require('dotenv').config({ path: require('path').resolve(__dirname, '../.env') });
const { encrypt, decrypt } = require('../utils/encryption');
const fs = require('fs');
const admin = require('firebase-admin');

const decryptedCredentials = JSON.parse(decrypt(process.env.SERVICE_ACCOUNT_KEY));

admin.initializeApp({
  credential: admin.credential.cert(decryptedCredentials),
});

const db = admin.firestore(); // Firestore instance

module.exports = { db }; // Export db as an object
